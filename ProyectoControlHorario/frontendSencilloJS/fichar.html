<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fichar - Control Horario</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">üïê Control Horario</div>
        <a href="dashboard.html" class="btn btn-secondary btn-sm">‚Üê Volver al Dashboard</a>
    </nav>
    
    <div class="container">
        <div class="form-container">
            <h1>‚è∞ Registrar Fichaje</h1>
            <p class="subtitle">Haz clic para registrar tu entrada o salida</p>
            
            <div class="clock" id="clock"></div>
            
            <button onclick="fichar()" class="btn btn-primary btn-large">
                üìç Fichar Ahora
            </button>
            
            <div id="ficharResponse" class="response"></div>
            
            <div class="info-box">
                <p><strong>‚ÑπÔ∏è Informaci√≥n:</strong></p>
                <p>El sistema registrar√° autom√°ticamente si es entrada o salida seg√∫n tu √∫ltimo fichaje.</p>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script>
        if (!verificarSesion()) {
            window.location.href = 'login.html';
        }
        
        // Reloj en tiempo real
        function actualizarReloj() {
            const ahora = new Date();
            const opciones = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            document.getElementById('clock').textContent = ahora.toLocaleDateString('es-ES', opciones);
        }
        
        actualizarReloj();
        setInterval(actualizarReloj, 1000);
    </script>
</body>
</html>